{"version":3,"sources":["../../src/providers/refeicao-service.ts","../../src/pages/login/login.ts","../../node_modules/@angular/core/@angular lazy","../../src lazy","../../src/pages/ajuda/ajuda.ts","../../src/providers/auth-service.ts","../../src/pages/refeicao-list/refeicao-list.ts","../../src/pages/refeicao-detail/refeicao-detail.ts","../../src/validators/email.ts","../../src/pages/signup/signup.ts","../../src/pages/profile/profile.ts","../../src/pages/history/history.ts","../../src/app/main.ts","../../src/app/app.module.ts","../../src/providers/user-service.ts","../../src/app/app.component.ts","../../node_modules/moment/locale ^/.//.*$","../../src/pages/home/home.ts","../../src/providers/time-service.ts","../../buffer (ignored)","../../crypto (ignored)","../../src/validators/ra.ts","../../src/validators/matching-passwords.ts","../../src/firebase-config.ts","../../src/pipes/format-pipe.ts","../../src/pipes/from-now-pipe.ts","../../src/pipes/title-case-pipe.ts","../../src/pipes/user-pos-pipe.ts","../../src/pipes/keys-pipe.ts","../../src/components/parallax-header/parallax-header.ts"],"names":[],"mappings":"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ACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACtP0C;AACiD;AAEL;AAEtF,2CAA2C;AACV;AACJ;AAE8B;AACQ;AACR;AACA;A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","file":"main.js","sourcesContent":["import { Injectable } from '@angular/core';\n\nimport { AngularFireDatabase, FirebaseListObservable, FirebaseObjectObservable } from 'angularfire2/database';\n\nimport { TimeService } from './time-service';\nimport { UserService } from './user-service';\nimport { AuthService } from './auth-service';\n\n//import firebase namespace for functions that aren't in AngularFire2\nimport * as firebase from 'firebase/app';\n\nimport { Observable } from \"rxjs/Rx\";\n\nimport 'rxjs/add/operator/take';\n\n//moment.js library for handling timestamps\nimport * as moment from 'moment';\nimport 'moment/locale/pt-br';\n\nconst pageLength = 5;\n\n@Injectable()\nexport class RefeicaoService {\n\n  nextPageCursor: any;\n  pages = [];\n  currentPage: number;\n\n  constructor(private db: AngularFireDatabase, private time: TimeService,\n    private _user: UserService, private _auth: AuthService) {\n    this.currentPage = 0;\n  }\n\n  /**\n   * Retorna a próxima página de refeições de acordo com a constante pageLength\n   */\n  nextPage(firstPage? : boolean): Observable<any> {\n    if(firstPage){\n      this.currentPage = 0;\n      this.nextPageCursor = undefined;\n    } \n    return Observable.create(subscriber => {\n      //Inicialização das variáveis\n      const now = this.time.localTimestamp();\n      let query: Observable<any>;\n\n      console.log('searching for the next page. cursor:', this.nextPageCursor);\n\n      //Realizar a query com ou sem o cursor.\n      if (this.nextPageCursor == undefined) {\n        query = this.db.list('/refeicoes', {\n          query: {\n            orderByChild: 'timestamp',\n            startAt: now,\n            limitToFirst: pageLength + 1 //+1 para guardar o último como cursor\n          }\n        });\n      } else {\n        query = this.db.list('/refeicoes', {\n          query: {\n            orderByChild: 'timestamp',\n            startAt: this.nextPageCursor.timestamp, //Como o cursor existe, começar a query por ele\n            limitToFirst: pageLength + 1 //+1 para guardar o último como cursor\n          }\n        });\n      }\n\n      //Subscribe na query para retirar a última refeição\n      //e colocá-la como cursos\n      query.take(1).subscribe(result => {\n        this.nextPageCursor = result[result.length - 1];\n        console.log('new cursor', moment(this.nextPageCursor.timestamp).format('LLLL'));\n        if (result.length > pageLength) {\n          //retirar a ultima entrada\n          this.nextPageCursor = result.pop();\n          result.lastPage = false;\n        }\n\n        //armazenar a página no array pages[]\n        this.pages.push(result);\n        console.log('new page',this.currentPage, this.pages[this.currentPage]);\n        //Atualizar a flag 'currentPage'\n        this.currentPage++;\n        \n\n        //verificar se há uma próxima página para mostrar na UI\n        this.db.list('/refeicoes', {\n          query: {\n            orderByChild: 'timestamp',\n            startAt: moment(this.nextPageCursor.timestamp).add(1, 'days').valueOf(), //o próximo dia\n            limitToFirst: 1 //se houver pelo menos uma entrada, há uma nova página\n          }\n        }).take(1).subscribe(nextpage =>{\n          result.lastPage = nextpage.length == 0;\n          //Enviar os resultados para a Observable\n          subscriber.next(result);\n          subscriber.complete();\n        });\n\n      })\n\n    })\n\n\n  }\n\n  /**\n   * Retorna a página anterior de refeições de acordo com a constante pageLength\n   */\n  previousPage(): Observable<any> {\n    return Observable.create(subscriber => {\n      //Atualizar a flag 'currentPage'\n      this.currentPage -= 1;\n      //Atualizar o cursor da próxima página\n      this.nextPageCursor = this.pages[this.currentPage][0];\n\n      //Sinalizar caso seja a primeira página\n      if(this.currentPage == 0){\n        this.pages[this.currentPage].firstPage = true;\n      }\n\n      //Enviar os resultados para a Observable.\n      subscriber.next(this.pages[this.currentPage]);\n      subscriber.complete();\n    })\n\n  }\n\n\n\n  /**\n   * Pega a referência da refeição no banco de dados.\n   * @returns Observable.\n   */\n  refeicaoObservable(key: string): FirebaseObjectObservable<any> {\n    return this.db.object(`refeicoes/${key}`);\n  }\n\n  /**\n   * Realiza a reserva da refeição escolhida pelo usuário logado.\n   * @param refeicao A refeição escolhida\n   * @param isVeg Usuário é vegetariano ou não.\n   */\n  book(refeicao: any, isVeg: boolean): firebase.Promise<any> {\n    return new firebase.Promise((resolve, reject) => {\n      //verificar se o usuário pode comprar a refeição escolhida.\n      this._user.canBuy(refeicao).subscribe(result => {\n        //Se result for uma string, então ocorreu algum problema\n        if (typeof result === 'string' || result instanceof String) {\n          reject(new Error(result as string));\n        } else {\n          //Operações que precisam ser feitas para realizar o book()\n          const debitSaldo = this._user.debitSaldo();\n          const incrementCount = this.incrementCount(refeicao, isVeg);\n          const vagas = this.subtractVagas(refeicao);\n          const addRefeicaoToUser = this._user.addRefeicao(refeicao);\n          const addUserToRefeicao = this.addUser(refeicao, isVeg);\n          resolve(Promise.all([debitSaldo, incrementCount, vagas, addRefeicaoToUser, addUserToRefeicao]));\n        }\n      })\n    })\n  }\n\n  /**\n   * Adiciona o usuário na refeição fornecida nos parâmetros\n   * @param refeicao A refeição a ser manipulada\n   * @param {boolean} isVeg Usuário vegetariano? \n   */\n  addUser(refeicao: any, isVeg: boolean): firebase.Promise<any> {\n    let userList;\n    if (isVeg) {\n      userList = firebase.database().ref(`/refeicoes/${refeicao.$key}/usersVeg`);\n    } else {\n      userList = firebase.database().ref(`/refeicoes/${refeicao.$key}/users`);\n    }\n\n    //verificar se o usuario ja esta na lista\n    //userList.child(this.auth.uid).once('value', snapshot => {\n    //  if( snapshot.val() == null ) userList.child(this.auth.uid).set(true); //nao esta na lista\n    //})\n\n    //Adicionar o usuário direto, nesse ponto já se sabe que o usuário não está na lista\n    return userList.child(this._auth.uid).set(true);\n  }\n\n  /**\n   * Promise que faz uma incrementa o contador de usuários da refeição\n   * @param refeicao A refeição a ser manipulada\n   * @param {boolean} isVeg Usuário vegetariano? \n  */\n  incrementCount(refeicao: any, isVeg: boolean): firebase.Promise<any> {\n    if (isVeg) {\n      return firebase.database().ref(`/refeicoes/${refeicao.$key}/usersVeg_count`)\n        .transaction(count => { return count + 1; });\n    } else {\n      return firebase.database().ref(`/refeicoes/${refeicao.$key}/users_count`)\n        .transaction(count => { return count + 1; });\n    }\n  }\n\n  /**\n   * Retorna uma Promise contendo número de vagas da refeição.\n   */\n  getVagas(refeicao: any): firebase.Promise<any> {\n    return firebase.database().ref(`/refeicoes/${refeicao.$key}/vagas`).transaction(vagas => vagas);\n  }\n\n  /**\n   * Decrementa o número de vagas da refeição. (vagas = users_count - usersVeg_count)\n   * @param refeicao A refeição a ser manipulada\n   */\n\n  subtractVagas(refeicao: any): firebase.Promise<any> {\n    //TODO: retornar uma Promise.reject() para qdo não tiver mais vaga\n    return new firebase.Promise((resolve, reject) => {\n      firebase.database().ref(`/refeicoes/${refeicao.$key}/vagas`)\n        .transaction(vagas => {\n          console.log('subtractVagas()', vagas)\n          if (vagas > 0) {\n            resolve(true);\n            return vagas - 1;\n          } else if (vagas == 0) {\n            //TODO: ativar a flag sold_out aqui.\n            reject(new Error('Vagas = 0 '));\n            return vagas;\n          } else { // == null\n            return vagas;\n          }\n        });\n    })\n  }\n\n  /**\n   * Pega a posição do usuário a ser adicionado na fila baseado no contador.\n   * @param refeicao A refeição selecionada\n   */\n  getUserPos(refeicao: any): firebase.Promise<any> {\n    return firebase.database().ref(`/refeicoes/${refeicao.$key}/queue_count`).transaction(count => count);\n  }\n\n  /**\n   * Coloca o usuário na fila de espera da refeição escolhida.\n   * @param refeicao A refeição escolhida\n  */\n  queue(refeicao: any): firebase.Promise<any> {\n    //TODO: verificar se precisa fazer distinção de usuários (default e veg) na fila de espera.\n    return new firebase.Promise((resolve, reject) => {\n\n      //verificar se o usuário pode entrar na fila\n      this._user.canQueue(refeicao).subscribe(result => {\n        //Se result for uma string, então ocorreu algum problema\n        if (typeof result === 'string' || result instanceof String) {\n          reject(new Error(result as string));\n        } else {\n          //Pegar a posição do usuário\n          this.getUserPos(refeicao)\n            .then(count => {\n              const pos: Number = count.snapshot.val();\n              //Promises para adicionar o usuário na fila da refeição.\n              const refeicaoQueue = firebase.database().ref(`/refeicoes/${refeicao.$key}/queue`)\n                .child(this._auth.uid).set(pos);\n              const queueCount = firebase.database().ref(`/refeicoes/${refeicao.$key}/queue_count`).transaction(count => count + 1);\n              const userQueue = this._user.addToQueue(refeicao, pos);\n              //Debitar o saldo do usuário\n              resolve(Promise.all([refeicaoQueue, queueCount, userQueue]));\n            })\n            .catch(reason => console.log(reason));\n        }\n      })\n    })\n  }\n\n  /**\n   * Remove o usuário da lista da refeição, diminuindo o contador.\n   * @param refeicao A refeição a ser manipulada\n   * @param {booelan} isVeg Usuário vegetariano\n   */\n  removeUser(refeicao: any, isVeg: boolean): firebase.Promise<any> {\n    return isVeg ?\n      Promise.all([\n        firebase.database().ref(`/refeicoes/${refeicao.$key}/usersVeg/${this._auth.uid}`).remove(),\n        firebase.database().ref(`/refeicoes/${refeicao.$key}/usersVeg_count/`).transaction(count => count - 1)])\n      :\n      Promise.all([\n        firebase.database().ref(`/refeicoes/${refeicao.$key}/users/${this._auth.uid}`).remove(),\n        firebase.database().ref(`/refeicoes/${refeicao.$key}/users_count/`).transaction(count => count - 1)])\n  }\n\n  /**\n   * Remove o usuário da refeição, reembolsando-o.\n   * @param {any} refeicao A refeição selecionada.\n   */\n  remove(refeicao: any, isVeg: boolean): firebase.Promise<any> {\n    //OBS: O reembolso do usuário é feito pelo Firebase Functions.\n    //verificar se está dentro do tempo\n    if (this.time.isAllowed(refeicao.timestamp)) {\n      //Adicionar uma vaga na refeicao\n      const vagas = firebase.database().ref(`/refeicoes/${refeicao.$key}/vagas`).transaction(vagas => vagas + 1);\n      const removeRefeicao = this._user.removeRefeicao(refeicao);\n      const removeUser = this.removeUser(refeicao, isVeg);\n\n      return Promise.all([vagas, removeRefeicao, removeUser]);\n    }\n    return Promise.reject(false);\n  }\n\n  /**\n   * Remove o usuário da fila de espera da refeição, reembolsando-o.\n   * @param {any} refeicao A refeição selecionada.\n   */\n  removeQueue(refeicao: any): firebase.Promise<any> {\n    return new firebase.Promise((resolve, reject) => {\n      if (this.time.isAllowed(refeicao.timestamp)) {\n        //Remover o usuário da da fila\n        const removeUser = firebase.database().ref(`/refeicoes/${refeicao.$key}/queue/${this._auth.uid}`).remove();\n        //decrementar o contador da fila\n        const queueCount = firebase.database().ref(`/refeicoes/${refeicao.$key}/queue_count`).transaction(queue => queue - 1);\n        //Remover a refeição do usuário\n        const removeQueue = this._user.removeQueue(refeicao);\n        //TODO: Verificar se esse reembolso precisa ser feito na Firebase Functions.\n        const incrementSaldo = this._user.incrementSaldo();\n\n        resolve(Promise.all([removeUser, queueCount, removeQueue, incrementSaldo]));\n      } else {\n        reject(new Error('not allowed'));\n      }\n    })\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/providers/refeicao-service.ts","import { Component } from '@angular/core';\nimport { NavController, NavParams, AlertController, ToastController, Events } from 'ionic-angular';\n\nimport { Validators, FormBuilder, FormGroup } from '@angular/forms';\nimport { EmailValidator } from '../../validators/email';\n\nimport { HomePage } from '../home/home';\nimport { SignupPage } from '../signup/signup';\n\nimport { AngularFireAuth } from 'angularfire2/auth';\nimport { AuthService } from '../../providers/auth-service';\n\n@Component({\n  selector: 'page-login',\n  templateUrl: 'login.html'\n})\nexport class LoginPage {\n\n  //A FormGroup is a collection of FormControls, which is inputed in html.\n  private loginForm: FormGroup;\n\n  //Boolean variable that stores if user tries to submit the form.\n  private submitAttempt: boolean;\n\n  //String variable that stores the server error in a failed signin.\n  private loginError: string;\n\n\n  constructor(public navCtrl: NavController, public navParams: NavParams,\n    public alertCtrl: AlertController, private formBuilder: FormBuilder,\n    public toastCtrl: ToastController, public events: Events, \n    private _auth: AuthService, private afAuth: AngularFireAuth) {\n\n    //Create FormBuilder with your inputs and their Validators.\n    this.loginForm = this.formBuilder.group({\n      email: ['', Validators.compose([Validators.required, EmailValidator.isValid])],\n      password: ['', Validators.required]\n    });\n\n    //Persistir o login do usuário\n    //TODO: executar função abaixo somente na primeira vez.\n    this._auth.persistLogin()\n      .then( val => {\n        console.log(val)\n        this.onLoginSuccess()\n      })\n      .catch(reason => console.log(reason));\n\n  }\n\n  /**\n   * Fazer o login do usuário se o formulário for válido.\n   */\n  login(): void {\n    this.submitAttempt = true;\n    if (this.loginForm.valid) {\n\n      this._auth.signInWithEmail(this.loginForm.value.email, this.loginForm.value.password)\n        .then(() => this.onLoginSuccess())  //  Se o login deu certo, executar onLoginSuccess\n        .catch(error => { this.loginError = error.message }); //se não, mostre o erro. \n\n    } else {\n      console.log(\"loginForm is not valid.\");\n    }\n  }\n\n  /**\n   * Executa as funções após o login.\n   */\n  onLoginSuccess(): void {\n    this.events.publish('login'); //Criar um evento chamado 'login' para o sidemenu.\n    this.navCtrl.setRoot(HomePage); //Ir para HomePage.\n  }\n\n  /**\n   * Envia um email para resetar a senha do usuário.\n   */\n  resetPass(): void {\n    let prompt = this.alertCtrl.create({\n      title: 'Esqueceu a senha?',\n      message: \"Digite seu email para podermos resetar sua senha.\",\n      inputs: [\n        {\n          name: 'email',\n          placeholder: 'Email'\n        },\n      ],\n      buttons: [\n        {\n          text: 'Cancel',\n          handler: data => {\n            console.log('Cancel clicked on forgotPassword()');\n          }\n        },\n        {\n          text: 'Enviar',\n          handler: data => {\n            this.afAuth.auth.sendPasswordResetEmail(data.email)\n              .then(() => { this.onResetSuccess(data.email); })\n              .catch(error => { this.onResetFailure(error.message); });\n          }\n        }\n      ]\n    });\n    prompt.present();\n  }\n\n  /**\n   * Mostra um Toast caso a resetPass() tenha sido sucedida.\n   */\n  onResetSuccess(email: string): void {\n    let toast = this.toastCtrl.create({\n      message: 'Email enviado para ' + email,\n      duration: 3000\n    });\n    toast.present();\n  }\n\n  /**\n   * Mostra um Toast caso a resetPass() tenha falhado.\n   */\n  onResetFailure(error: string) {\n    let toast = this.toastCtrl.create({\n      message: error,\n      duration: 3000\n    });\n    toast.present();\n  }\n\n  /**\n   * Alert que mostra ajuda antes do login.\n   */\n  help(): void {\n    let help = this.alertCtrl.create({\n      title: 'Ajuda',\n      subTitle: 'Este aplicativo é o aplicativo para compra de refeições do RU da UNESP Bauru. Para entrar, digite seu email e senha previamente cadastrados. Caso não tenha cadastro, vá ate a DTAd do campus para realizar o cadastro.',\n      buttons: ['OK']\n    });\n    help.present();\n  }\n\n  /**\n   * Vai para a página de signup\n   */\n  signup(): void {\n    this.navCtrl.push(SignupPage);\n  }\n\n  //função para o desenvolvimento\n  fastLogin(): void {\n    this._auth.signInWithEmail(\"cieslakluiz@gmail.com\", \"123456\")\n      .then(() => this.onLoginSuccess())  //if login is sucessfull, go to home page\n      .catch(error => { this.loginError = error.message }); //else, show the error.\n  }\n\n  //função para o desenvolvimento\n  vegLogin(): void {\n    this._auth.signInWithEmail(\"luiz_cieslak@hotmail.com\", \"luizveg\")\n      .then(() => this.onLoginSuccess())  //if login is sucessfull, go to home page\n      .catch(error => { this.loginError = error.message }); //else, show the error.\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/login/login.ts","function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncatched exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tthrow new Error(\"Cannot find module '\" + req + \"'.\");\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = 190;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/@angular/core/@angular lazy\n// module id = 190\n// module chunks = 0","function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncatched exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tthrow new Error(\"Cannot find module '\" + req + \"'.\");\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = 233;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src lazy\n// module id = 233\n// module chunks = 0","import { Component } from '@angular/core';\nimport { NavController, NavParams } from 'ionic-angular';\n\n/*\n  Generated class for the Ajuda page.\n\n  See http://ionicframework.com/docs/v2/components/#navigation for more info on\n  Ionic pages and navigation.\n*/\n@Component({\n  selector: 'page-ajuda',\n  templateUrl: 'ajuda.html'\n})\nexport class AjudaPage {\n\n  constructor(public navCtrl: NavController, public navParams: NavParams) {}\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/ajuda/ajuda.ts","import { Injectable } from '@angular/core';\n\n//import firebase namespace for functions that aren't in AngularFire2\nimport * as firebase from 'firebase/app';\n\n//importing angular auth items\nimport { AngularFireAuth } from 'angularfire2/auth';\n\n//Native storage\nimport { NativeStorage } from '@ionic-native/native-storage';\n\n@Injectable()\nexport class AuthService {\n\n  displayName: string;\n\n  constructor(private afAuth: AngularFireAuth, private nativeStorage: NativeStorage) {\n    afAuth.authState.subscribe(user => {\n      if (!user) {\n        this.displayName = null;\n        return;\n      }\n      this.displayName = user.displayName;\n    });\n  }\n\n  /**\n   * @returns true if user is authenticated.\n   */\n  get autenthicated(): boolean {\n    return this.afAuth.authState !== null;\n  }\n\n  /**\n   * @returns user's uid.\n   */\n  get uid(): string {\n    return this.afAuth.authState !== null ? this.afAuth.auth.currentUser.uid : null;\n  }\n\n  /**\n   * @returns user's email.\n   */\n  get email(): string {\n    return this.afAuth.authState !== null ? this.afAuth.auth.currentUser.email : null;\n  }\n\n  /**\n   * Persist user's login by checking if there is someting in authState \n   * or if there is a user token store in native storage.\n   */\n  persistLogin(): Promise<any> {\n    return new Promise((resolve, reject) => {\n      this.afAuth.authState.subscribe(auth => {\n        if (auth !== null) {\n          resolve('user already logged in');\n        }\n        else {\n          this.nativeStorage.getItem('userToken')\n            .then(token => {\n              //try to login with key retrieved\n              this.afAuth.auth.signInWithCustomToken(token)\n                .then(() => resolve('logged in with token'))\n                .catch(reason => console.log('error in signInWithCustomToken', reason));\n            })\n            .catch(reason => reject('no auth and no token: ' + reason));\n        }\n      })\n    })\n  }\n\n  /**\n   * Sign in into Firebase using Email.\n   * @returns Firebase Promise.\n   */\n  signInWithEmail(email: string, password: string): Promise<any> {\n    return new Promise((resolve, reject) => {\n\n      //Sign in with email\n      this.afAuth.auth.signInWithEmailAndPassword(email, password)\n        .then(() => {\n          //Then, storage user's login token in native storage\n          this.storeUserToken();\n          resolve(true);\n        })\n        .catch(reason => reject(reason));\n    })\n\n  }\n\n  storeUserToken(): void {\n    console.log('storeUserToken');\n    this.afAuth.auth.currentUser.getToken()\n      .then(token => {\n        this.nativeStorage.setItem('userToken', token)\n          .then(val => console.log('user token stored', val))\n          .catch(reason => console.error('nativeStorage.setItem()', reason));\n      })\n      .catch(reason => console.log(reason));\n  }\n\n  signOut(): firebase.Promise<any> {\n    return this.afAuth.auth.signOut();\n  }\n\n  /**\n   * Sign up into Firebase using Email.\n   * @returns Firebase Promise.\n   */\n  signUp(email: string, password: string): firebase.Promise<any> {\n    return this.afAuth.auth.createUserWithEmailAndPassword(email, password);\n  }\n\n  /**\n   * Reset user's password using Firebase mail system.\n   * @returns Firebase Promise.\n   */\n  resetPassword(email: string): firebase.Promise<any> {\n    return this.afAuth.auth.sendPasswordResetEmail(email);\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/providers/auth-service.ts","import { Component } from '@angular/core';\nimport { NavController, NavParams, LoadingController, Loading, AlertController } from 'ionic-angular';\n\nimport { AngularFireDatabase, FirebaseListObservable } from 'angularfire2/database';\n\nimport { RefeicaoDetailPage } from '../refeicao-detail/refeicao-detail';\n\nimport { Observable } from \"rxjs/Rx\";\n\n\n//moment.js library for handling timestamps\nimport * as moment from 'moment';\nimport 'moment/locale/pt-br';\n\nimport { TimeService } from '../../providers/time-service';\nimport { RefeicaoService } from '../../providers/refeicao-service';\nimport { UserService } from '../../providers/user-service';\n\nimport { HomePage } from '../home/home';\n\n@Component({\n  selector: 'page-refeicao-list',\n  templateUrl: 'refeicao-list.html'\n})\nexport class RefeicaoListPage {\n\n  refeicoes: Observable<any>; //refeicoes array.\n  loading: Loading;                       //loading component.\n  empty: boolean;\n  canGoBack: boolean = false;\n  canBuy: Array<boolean> = [];\n  canQueue: Array<boolean> = [];\n  message: Array<string> = [];\n  boughtOrQueued: Array<boolean> = [];\n\n  constructor(public navCtrl: NavController, public navParams: NavParams,\n    public loadingCtrl: LoadingController, public afDB: AngularFireDatabase,\n    public time: TimeService, public _refeicao: RefeicaoService,\n    public _user: UserService, public alertCtrl: AlertController) {\n\n    //create present the loading\n    this.loading = this.loadingCtrl.create();\n    this.loading.present();\n\n    //buscar a próxima página de refeições\n    this.nextPage(true);\n    this.loading.dismiss(); \n  }\n\n  /**\n   * Ir para a refeicao-detail page com a refeição escolhida.\n   * @param {any} refeicao A refeição escolhida\n   */\n  gotoDetails(refeicao: any): void {\n    this.navCtrl.push(RefeicaoDetailPage, {\n      refeicao: refeicao\n    })\n  }\n\n  /**\n   * Função pré book() que pergunta se o usuário confirma a reserva.\n   */\n  confirmBook(refeicao: any): void {\n    let confirm = this.alertCtrl.create({\n      title: 'Confirmar Reserva',\n      message: `Tem certeza que deseja reservar a refeicao de ${moment(refeicao.timestamp).format(`L`)}? Seu saldo será debitado.`,\n      buttons: [\n        {\n          text: 'Cancelar',\n        },\n        {\n          text: 'Sim',\n          handler: () => {\n            this.book(refeicao);\n          }\n        }\n      ]\n    });\n    confirm.present();\n  }\n\n  book(refeicao: any): void {\n    this._user.isVeg()\n      .then(snapshot => {\n        this._refeicao.book(refeicao, snapshot.val())\n          .then(_ => {\n            //Adicionar transação no histórico\n            this._user.addHistory('compra', `Refeição do dia ${moment(refeicao.timestamp).format('L')}`);\n            //Mostrar mensagem de confirmação.\n            //Não seria melhor um toast?\n            let alert = this.alertCtrl.create({ //AlertController para a compra realizada com sucesso.\n              title: 'Sucesso',\n              subTitle: 'Compra realizada com sucesso!',\n              buttons: [{\n                text: 'OK',\n                handler: _ => {\n                  this.navCtrl.setRoot(HomePage); //redirecionar o usuário para a HomePage\n                }\n              }]\n            });\n            alert.present();\n          })\n          .catch(reason => {\n            let alert = this.alertCtrl.create({\n              title: 'Erro',\n              subTitle: reason.message,\n              buttons: ['OK']\n            })\n            alert.present();\n          });\n      })\n  }\n\n  /**\n   * Função pré queue() que confirma a entrada do usuário na fila de espera.\n   */\n  confirmQueue(refeicao: any): void {\n    let confirm = this.alertCtrl.create({\n      title: 'Confirmar entrada na fila',\n      message: `Tem certeza que deseja entrar na fila da refeição do dia ${moment(refeicao.timestamp).format(`L`)}? Seu saldo será debitado e te avisaremos caso você consiga uma vaga. Se não conseguir, seu saldo será reembolsado.`,\n      buttons: [\n        {\n          text: 'Cancelar',\n        },\n        {\n          text: 'Sim',\n          handler: () => {\n            this.queue(refeicao);\n          }\n        }\n      ]\n    });\n    confirm.present();\n  }\n\n  /**\n   * Coloca o usuário na fila de espera.\n   */\n  queue(refeicao: any): void {\n    this._refeicao.queue(refeicao)\n      .then(_ => {\n        //Adicionar transação no histórico\n        this._user.addHistory('compra', `Entrou na fila da refeição do dia ${moment(refeicao.timestamp).format('L')}`);\n        let alert = this.alertCtrl.create({ //AlertController para a compra realizada com sucesso.\n          title: 'Sucesso',\n          subTitle: 'Você entrou na fila!',\n          buttons: [{\n            text: 'OK',\n            handler: _ => {\n              this.navCtrl.setRoot(HomePage); //redirecionar o usuário para a HomePage\n            }\n          }]\n        });\n        alert.present();\n      })\n      .catch(error => console.log('error in queue()', error));\n  }\n\n  nextPage(firstPage?: boolean): void {\n\n    if (firstPage) {\n      //Pegar a lista de refeições de maneira assíncrona\n      this.refeicoes = this._refeicao.nextPage(true) //true para a flag firstPage\n      //dar um share() para que a função não seja chamada 2x.\n      .share();\n    }else{\n        this.canGoBack = true;\n        this.refeicoes = this._refeicao.nextPage()\n        .share();\n    }\n\n\n    this.refeicoes.subscribe(snapshots => {\n      //checar se o array snapshots é vazio ou se é a ultima página\n      this.empty = snapshots.length == 0 || snapshots.lastPage;\n      console.log('empty?', this.empty)\n\n      //para cada refeicao, verificar se pode comprar e pode entrar na fila\n      snapshots.forEach((snapshot, index) => {\n        this.checkAvailability(snapshot, index);\n      });\n    });\n  }\n\n  previousPage(): void {\n\n    //Pegar a lista de refeições de maneira assíncrona\n    this.refeicoes = this._refeicao.previousPage();\n\n    //Assim que os dados forem carregados, fechar o loading component.\n    this.refeicoes.subscribe(snapshots => {\n      //mudar a flag 'empty' para falso, já que voltamos a página que tem conteúdo.\n      this.empty = false;\n      //Verificar se a página requisitada é a primeira.\n      this.canGoBack = snapshots.firstPage;\n      console.log('empty?', this.empty)\n      //para cada refeicao, verificar se pode comprar e pode entrar na fila\n      snapshots.forEach((snapshot, index) => {\n        this.checkAvailability(snapshot, index);\n      });\n    });\n  }\n\n  checkAvailability(snapshot: any, index: number) {\n    //iniciar as variaveis canBuy e canQueue\n    const obs1 = this._user.canBuy(snapshot);\n    obs1.subscribe(result => {\n\n      //Se result for uma string, então ocorreu algum problema\n      if (typeof result === 'string' || result instanceof String) {\n        this.canBuy[index] = false;\n        this.message[index] = result as string;\n      } else {\n        this.canBuy[index] = result;\n      }\n\n      const obs2 = this._user.canQueue(snapshot);\n      obs2.subscribe(result => {\n        //Se result for uma string, então ocorreu algum problema\n        if (typeof result === 'string' || result instanceof String) {\n          this.canQueue[index] = false;\n          this.message[index] = result as string;\n        } else {\n          this.canQueue[index] = result;\n        }\n\n        this.boughtOrQueued[index] = this.message[index] == 'Comprado' || this.message[index] == 'Entrou na fila';\n        console.log(moment(snapshot.timestamp).calendar(), 'canBuy?', this.canBuy[index], 'canQueue?', this.canQueue[index]);\n      })\n    })\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/refeicao-list/refeicao-list.ts","import { Component } from '@angular/core';\nimport { NavController, NavParams, AlertController, LoadingController, Loading, ToastController } from 'ionic-angular';\n\nimport { AngularFireDatabase } from 'angularfire2/database';\n\nimport { HomePage } from '../home/home';\n\nimport { UserService } from '../../providers/user-service';\nimport { RefeicaoService } from '../../providers/refeicao-service';\n\n@Component({\n  selector: 'page-refeicao-detail',\n  templateUrl: 'refeicao-detail.html'\n})\nexport class RefeicaoDetailPage {\n\n  buttonMsg = 'Reservar';\n  buttonQueueMsg = 'Entrar na fila de espera';\n\n  loading: Loading; //loading component.\n\n  refeicaoParams: any; //refeicao sent via NavParams\n\n  canBuy: boolean; //Variável que guarda se o usuário pode comprar esta refeição. (usada no botão)\n  canQueue: boolean; //Variável que guarda se o usuário pode entrar na fila de espera. (usada no botão)\n\n  constructor(public navCtrl: NavController, public navParams: NavParams,\n    public afDB: AngularFireDatabase, public alertCtrl: AlertController,\n    public loadingCtrl: LoadingController, public toastCtrl: ToastController,\n    public _user: UserService, public _refeicao: RefeicaoService) {\n\n    //create and present the loading\n    this.loading = this.loadingCtrl.create();\n    this.loading.present();\n\n    //Pegar a refeição enviada por NavParams\n    this.refeicaoParams = this.navParams.get('refeicao');\n\n    //iniciar as variaveis canBuy e canQueue\n    const obs1 = this._user.canBuy(this.refeicaoParams);\n    obs1.subscribe(result => {\n      console.log('canBuy?', result);\n      //Se result for uma string, então ocorreu algum problema\n      if (typeof result === 'string' || result instanceof String) {\n        this.canBuy = false;\n        this.buttonMsg = result as string;\n      } else {\n        this.canBuy = result;\n      }\n\n      const obs2 = this._user.canQueue(this.refeicaoParams);\n      obs2.subscribe(result => {\n        console.log('canQueue?', result);\n        //Se result for uma string, então ocorreu algum problema\n        if (typeof result === 'string' || result instanceof String) {\n          this.canQueue = false;\n          this.buttonQueueMsg = result as string;\n          //Se canBuy = true, canQueue = false\n        } else {\n          this.canQueue = result;\n        }\n\n        //Dispensar o Loadind Component\n        this.loading.dismiss();\n      })\n\n    })\n  }\n\n  ionViewDidLoad() {\n    console.log('ionViewDidLoad RefeicaoDetailPage');\n  }\n\n  /**\n   * Função pré book() que pergunta se o usuário confirma a reserva.\n   */\n  confirmBook(): void {\n    let confirm = this.alertCtrl.create({\n      title: 'Confirmar Reserva',\n      message: 'Tem certeza que deseja reservar esta refeição? Seu saldo será debitado.',\n      buttons: [\n        {\n          text: 'Cancelar',\n        },\n        {\n          text: 'Sim',\n          handler: () => {\n            this.book();\n          }\n        }\n      ]\n    });\n    confirm.present();\n  }\n\n  book(): void {\n    this._user.isVeg()\n      .then(snapshot => {\n        this._refeicao.book(this.refeicaoParams, snapshot.val())\n          .then(_ => {\n            //Mostrar mensagem de confirmação.\n            //Não seria melhor um toast?\n            let alert = this.alertCtrl.create({ //AlertController para a compra realizada com sucesso.\n              title: 'Sucesso',\n              subTitle: 'Compra realizada com sucesso!',\n              buttons: [{\n                text: 'OK',\n                handler: _ => {\n                  this.navCtrl.setRoot(HomePage); //redirecionar o usuário para a HomePage\n                }\n              }]\n            });\n            alert.present();\n          })\n          .catch(reason => {\n            let alert = this.alertCtrl.create({\n              title: 'Erro',\n              subTitle: reason.message,\n              buttons: ['OK']\n            })\n            alert.present();\n          });\n      })\n  }\n\n  /**\n   * Função pré queue() que confirma a entrada do usuário na fila de espera.\n   */\n  confirmQueue(): void {\n    let confirm = this.alertCtrl.create({\n      title: 'Confirmar entrada na fila',\n      message: 'Tem certeza que deseja entrar na fila? Seu saldo será debitado e te avisaremos caso você consiga uma vaga. Se não conseguir, seu saldo será reembolsado.',\n      buttons: [\n        {\n          text: 'Cancelar',\n        },\n        {\n          text: 'Sim',\n          handler: () => {\n            this.queue();\n          }\n        }\n      ]\n    });\n    confirm.present();\n  }\n\n  /**\n   * Coloca o usuário na fila de espera.\n   */\n  queue(): void {\n    this._refeicao.queue(this.refeicaoParams)\n      .then(_ => {\n        let alert = this.alertCtrl.create({ //AlertController para a compra realizada com sucesso.\n          title: 'Sucesso',\n          subTitle: 'Você entrou na fila!',\n          buttons: [{\n            text: 'OK',\n            handler: _ => {\n              this.navCtrl.setRoot(HomePage); //redirecionar o usuário para a HomePage\n            }\n          }]\n        });\n        alert.present();\n      })\n      .catch(error => console.log('error in queue()', error));\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/refeicao-detail/refeicao-detail.ts","import { FormControl } from '@angular/forms';\n\nexport class EmailValidator {\n  /**\n   * Verifica se o email é valido através de uma expressão regular.\n   */\n  static isValid(control: FormControl): any {\n    let EMAIL_REGEXP = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;      \n\n    return EMAIL_REGEXP.test(control.value) ? null : { invalidEmail : true};\n\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/validators/email.ts","import { Component } from '@angular/core';\nimport { NavController, NavParams } from 'ionic-angular';\n\nimport { Validators, FormBuilder, FormGroup } from '@angular/forms';\nimport { EmailValidator } from '../../validators/email';\nimport { RaValidator } from '../../validators/ra';\nimport { matchingPasswords } from '../../validators/matching-passwords';\n\nimport { LoginPage } from '../login/login';\n\nimport { AngularFireDatabase, FirebaseObjectObservable } from 'angularfire2/database';\nimport { AngularFireAuth } from 'angularfire2/auth';\nimport * as firebase from 'firebase/app';\n\n@Component({\n  selector: 'page-signup',\n  templateUrl: 'signup.html'\n})\nexport class SignupPage {\n\n  //A FormGroup is a collection of FormControls, which is inputed in html.\n  private signupForm: FormGroup;\n\n  //Boolean variable that stores if user tries to submit the form.\n  private submitAttempt: boolean;\n\n  //String variable that stores the server error in a failed signin.\n  private signupError: string;\n\n  constructor(public navCtrl: NavController, public navParams: NavParams,\n    private formBuilder: FormBuilder, private afAuth: AngularFireAuth,\n    public afDB: AngularFireDatabase) {\n\n    //Create FormBuilder with your inputs and their Validators.\n    this.signupForm = this.formBuilder.group({\n      email: ['', Validators.compose([Validators.required, EmailValidator.isValid])],\n      name: ['', Validators.compose([Validators.required, Validators.maxLength(30)])],\n      ra: ['', Validators.compose([Validators.required, Validators.minLength(8), Validators.maxLength(9), RaValidator.isValid,])],\n      password: ['', Validators.compose([Validators.required, Validators.minLength(6)])],\n      confirmPass: ['', Validators.required],\n      veg: ['false', Validators.required]\n    }, { validator: matchingPasswords('password', 'confirmPass') });\n\n  }\n\n  ionViewDidLoad() {\n    console.log('ionViewDidLoad SignupPage');\n  }\n\n  /**\n   * Cria uma conta com email e senha caso o formulário for válido.\n   */\n  signUp(): void {\n    this.submitAttempt = true;\n    if (this.signupForm.valid) {\n      //create a user using AuthService\n      this.afAuth.auth.createUserWithEmailAndPassword(this.signupForm.value.email, this.signupForm.value.password)\n        //then, call onSignUpSuccess\n        .then(() => this.onSignUpSuccess())\n        //if there is an error, display to the user.\n        .catch(error => this.signupError = error.message);\n\n      //go to login page after all.\n      //this.navCtrl.push(LoginPage);\n    } else {\n      console.log('signupForm is not valid.');\n    }\n  }\n\n  /**\n   * Executa funções após o signUp().\n   */\n  onSignUpSuccess(): void {\n    this.postSignup(this.afAuth.auth.currentUser.uid, this.signupForm.value) //store the additional info (name, RA) into the database\n      .then(() => this.onPostSignUpSuccess())\n      .catch(error => { console.log('error on postSignup()', error.message); });\n\n  }\n\n  /**\n   * Armazena os outros dados do usuário na árvore /users/\n   */\n  postSignup(uid: string, data): firebase.Promise<any> {\n    let user: FirebaseObjectObservable<any>;\n    user = this.afDB.object(`users/${uid}`);\n    return user.set(({\n      name: data.name,\n      ra: data.ra,\n      email: data.email,\n      saldo: 0,\n      refeicoes: {},\n      veg: data.veg,\n      created_at: firebase.database.ServerValue.TIMESTAMP,\n      updated_at: firebase.database.ServerValue.TIMESTAMP\n    }));\n  }\n\n  /**\n   * Desloga o usuário após a criação (O login após signup é padrão do Firebase).\n   */\n  onPostSignUpSuccess(): void {\n    console.log('onPostSignUpSuccess()');\n    this.afAuth.auth.signOut();\n    this.navCtrl.push(LoginPage);\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/signup/signup.ts","import { Component } from '@angular/core';\nimport { NavController, NavParams } from 'ionic-angular';\n\nimport { FirebaseObjectObservable, FirebaseListObservable } from 'angularfire2/database';\nimport { UserService } from '../../providers/user-service';\nimport { AuthService } from '../../providers/auth-service';\n\nimport { HistoryPage } from '../history/history';\n\n@Component({\n  selector: 'page-profile',\n  templateUrl: 'profile.html',\n})\nexport class ProfilePage {\n\n  //information in sidemenu header\n  user: FirebaseObjectObservable<any>;\n  profilePicture: any; //gravatar profile pic\n  history: FirebaseListObservable<any>;\n\n  constructor(public navCtrl: NavController, private _auth: AuthService,\n    private _user: UserService) {\n    //Retrieve data\n    this.user = this._user.userObservable();\n    this.profilePicture = this._user.gravatarLink();\n    this.history = this._user.lastFiveHistory();\n  }\n\n  gotoHistory(): void {\n    this.navCtrl.push(HistoryPage);\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/profile/profile.ts","import { Component } from '@angular/core';\n\nimport { FirebaseListObservable, AngularFireDatabase } from 'angularfire2/database';\nimport { UserService } from '../../providers/user-service';\nimport { AuthService } from '../../providers/auth-service';\n\nimport { Subject } from 'rxjs';\n\n@Component({\n  selector: 'page-history',\n  templateUrl: 'history.html',\n})\nexport class HistoryPage {\n\n  history: FirebaseListObservable<any>;\n  subject: Subject<string>;\n\n  constructor(private _auth: AuthService, private _user: UserService,\n    private db: AngularFireDatabase) {\n    this.subject = new Subject();\n    //TODO: Aplicar filtro\n    this.history = _user.history();\n  }\n  \n  filterBy(type: string){\n    console.log('filter by',type)\n    this.subject.next(type);\n  }\n\n\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/history/history.ts","import { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app.module';\n\nplatformBrowserDynamic().bootstrapModule(AppModule);\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/main.ts","import { BrowserModule } from '@angular/platform-browser';\nimport { ErrorHandler, NgModule } from '@angular/core';\nimport { IonicApp, IonicErrorHandler, IonicModule } from 'ionic-angular';\n\nimport { MyApp } from './app.component';\n\n//app pages\nimport { AjudaPage } from '../pages/ajuda/ajuda';\nimport { HomePage } from '../pages/home/home';\nimport { RefeicaoListPage } from '../pages/refeicao-list/refeicao-list';\nimport { RefeicaoDetailPage } from '../pages/refeicao-detail/refeicao-detail';\nimport { LoginPage } from '../pages/login/login';\nimport { SignupPage } from '../pages/signup/signup';\nimport { ProfilePage } from '../pages/profile/profile';\nimport { HistoryPage } from '../pages/history/history';\n\nimport { StatusBar } from '@ionic-native/status-bar';\nimport { SplashScreen } from '@ionic-native/splash-screen';\n\n//firebase\nimport { FirebaseConfig } from \"../firebase-config\";\nimport { AngularFireModule } from 'angularfire2';\nimport { AngularFireDatabaseModule } from 'angularfire2/database';\nimport { AngularFireAuthModule } from 'angularfire2/auth';\n\n//providers\nimport { AuthService } from \"../providers/auth-service\";\nimport { UserService } from \"../providers/user-service\";\nimport { RefeicaoService } from \"../providers/refeicao-service\";\nimport { TimeService } from '../providers/time-service';\n\n//Pipes\nimport { FormatPipe } from '../pipes/format-pipe';\nimport { FromNowPipe } from '../pipes/from-now-pipe';\nimport { TitleCasePipe } from '../pipes/title-case-pipe';\nimport { UserPosPipe } from '../pipes/user-pos-pipe';\nimport { KeysPipe } from '../pipes/keys-pipe';\n\n//Angular http\nimport { HttpModule } from '@angular/http';\n\n//Parallax Header\nimport { ParallaxHeader } from '../components/parallax-header/parallax-header';\n\n//Native storage\nimport { NativeStorage } from '@ionic-native/native-storage';\n\nimport { FCM } from '@ionic-native/fcm';\n\n@NgModule({\n  declarations: [\n    MyApp,\n    AjudaPage,\n    HomePage,\n    RefeicaoListPage,\n    RefeicaoDetailPage,\n    LoginPage,\n    SignupPage,\n    ProfilePage,\n    HistoryPage,\n    FormatPipe,\n    TitleCasePipe,\n    FromNowPipe,\n    UserPosPipe,\n    KeysPipe,\n    ParallaxHeader\n  ],\n  imports: [\n    BrowserModule,\n    IonicModule.forRoot(MyApp),\n    AngularFireModule.initializeApp(FirebaseConfig),\n    AngularFireDatabaseModule,\n    AngularFireAuthModule,\n    HttpModule\n  ],\n  bootstrap: [IonicApp],\n  entryComponents: [\n    MyApp,\n    AjudaPage,\n    HomePage,\n    RefeicaoListPage,\n    RefeicaoDetailPage,\n    LoginPage,\n    SignupPage,\n    ProfilePage,\n    HistoryPage\n  ],\n  providers: [\n    StatusBar,\n    SplashScreen,\n    RefeicaoService,\n    UserService,\n    AuthService,\n    TimeService,\n    NativeStorage,\n    FCM,\n    { provide: ErrorHandler, useClass: IonicErrorHandler }\n  ]\n})\nexport class AppModule { }\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/app.module.ts","import { Injectable } from '@angular/core';\nimport { AngularFireDatabase, FirebaseObjectObservable, FirebaseListObservable } from 'angularfire2/database';\n\nimport { AuthService } from './auth-service';\nimport { RefeicaoService } from './refeicao-service'; //not working :(\nimport { TimeService } from './time-service';\n\nimport Rx from \"rxjs/Rx\";\n//import firebase namespace for functions that aren't in AngularFire2\nimport * as firebase from 'firebase/app';\n\n//gravatar requires a MD5 hash of user's email address.\nimport md5 from 'crypto-md5';\n\n//moment.js library for handling timestamps\nimport * as moment from 'moment';\nimport 'moment/locale/pt-br';\n\n@Injectable()\nexport class UserService {\n\n  //can't import RefeicaoService here, gives 'can't resolve all parameters' error.\n  constructor(private afDB: AngularFireDatabase, private _auth: AuthService,\n    private _time: TimeService) {\n  }\n\n  /**\n   * Function called after AuthService.signUp() to store user's additional info.\n   * @argument {string} uid id do usuário\n   */\n  postSignup(uid: string, data): firebase.Promise<any> {\n    const user = this.afDB.object('users/' + uid);\n    return user.set(({\n      name: data.name,\n      ra: data.ra,\n      email: data.email,\n      saldo: 0,\n      refeicoes: {},\n      veg: data.veg,\n      created_at: firebase.database.ServerValue.TIMESTAMP,\n      updated_at: firebase.database.ServerValue.TIMESTAMP\n    }));\n  }\n\n  gravatarLink(): string {\n    return \"https://www.gravatar.com/avatar/\" + md5(this._auth.email.toLowerCase(), 'hex');\n  }\n\n  /**\n   * Pega a referência do usuário no banco de dados.\n   * @returns Observable.\n   */\n  userObservable(): FirebaseObjectObservable<any> {\n    return this.afDB.object(`users/${this._auth.uid}`);\n  }\n\n  lastFiveHistory(): FirebaseListObservable<any> {\n    return this.afDB.list(`users/${this._auth.uid}/saldo_history`, {\n      query: {\n        orderByChild: 'reverseTimestamp',\n        limitToFirst: 5\n      }\n    });\n  }\n\n  history(): FirebaseListObservable<any> {\n    return this.afDB.list(`users/${this._auth.uid}/saldo_history`, {\n      query: {\n        orderByChild: 'reverseTimestamp'\n      }\n    });\n  }\n\n  addHistory(type: string, description: string): firebase.Promise<any> {\n    return firebase.database().ref(`users/${this._auth.uid}/saldo_history`).push({\n      type: type,\n      description: description,\n      timestamp: moment().valueOf(),\n      reverseTimestamp: Number.MAX_SAFE_INTEGER - moment().valueOf()\n    })\n  }\n\n\n  /**\n   * Retorna o saldo do usuário logado.\n   */\n  getSaldo(): firebase.Promise<any> {\n    return firebase.database().ref(`users/${this._auth.uid}/saldo`).transaction(saldo => saldo);\n  }\n\n  isVeg(): firebase.Promise<any> {\n    return firebase.database().ref(`users/${this._auth.uid}/veg`).once('value');\n  }\n\n  /**\n   * Verifica se o usuário pode comprar a refeição.\n   * \n   * Itens verificados:\n   * - Vagas da refeição > 0\n   * - Saldo do usuário > 0\n   * - Usuário não comprou a refeição\n   * - Está dentro do tempo estipulado.\n   */\n  canBuy(refeicao: any): Rx.Observable<any> {\n    let subject = new Rx.Subject<any>();\n\n    let vagas: Number;\n    let saldo: Number;\n    let bought: boolean;\n    let isQueueEmpty: boolean;\n    const p1 = firebase.database().ref(`/refeicoes/${refeicao.$key}/vagas`).transaction(\n      vagas => vagas); //RefeicaoService not working\n    const p2 = this.getSaldo();\n    const p3 = this.bought(refeicao);\n    const p4 = firebase.database().ref(`/refeicoes/${refeicao.$key}/queue_count`).transaction(\n      count => count); //RefeicaoService not working\n\n    Promise.all([p1, p2, p3, p4])\n      .then(values => {\n        //values[0] é o resultado de p1, que é o n de vagas\n        //values[1] é o resultado de p2, que é o saldo.\n        vagas = values[0].snapshot.val();\n        saldo = values[1].snapshot.val();\n        bought = values[2];\n        isQueueEmpty = values[3].snapshot.val() == 0;\n        //Verificar se as condições são verdadeiras\n        if (vagas > 0)\n          if (saldo > 0)\n            if (!bought)\n              if (isQueueEmpty)\n                if (this._time.isAllowed(refeicao.timestamp)) {\n                  subject.next(true);\n                  subject.complete();\n                }\n                else\n                  subject.next('Tempo esgotado');\n              else\n                subject.next('Fila não vazia');\n            else\n              subject.next('Comprado');\n          else\n            subject.next('Sem saldo');\n        else\n          subject.next('Sem vagas');\n      })\n      .catch(error => console.log('error in UserService canBuy()', error));\n\n    return subject;\n  }\n\n  /**\n   * Verifica se o usuário pode comprar entrar na fila da refeição\n   * \n   * Itens verificados:\n   * - Vagas da refeição == 0\n   * - Saldo do usuário > 0\n   * - Usuário não está na fila\n   * - Está dentro do tempo estipulado.\n   */\n  canQueue(refeicao: any): Rx.Observable<any> {\n    let subject = new Rx.Subject<any>();\n\n    let vagas: Number;\n    let saldo: Number;\n    let isQueued: boolean;\n    let bought: boolean;\n    const p1 = firebase.database().ref(`/refeicoes/${refeicao.$key}/vagas`).transaction(vagas => vagas); //RefeicaoService not working\n    const p2 = this.getSaldo();\n    const p3 = this.isQueued(refeicao);\n    const p4 = this.bought(refeicao);\n\n    Promise.all([p1, p2, p3, p4])\n      .then(values => {\n        //values[0] é o resultado de p1, que é o n de vagas\n        //values[1] é o resultado de p2, que é o saldo.\n        vagas = values[0].snapshot.val();\n        saldo = values[1].snapshot.val();\n        isQueued = values[2];\n        bought = values[3];\n\n        //Verificar se as condições são verdadeiras\n        if (vagas == 0)\n          if (saldo > 0)\n            if (!isQueued)\n              if (!bought)\n                if (this._time.isAllowed(refeicao.timestamp)) {\n                  //TODO: verificar se o tempo para entrar na fila é o mesmo para comprar a refeição\n                  subject.next(true);\n                  subject.complete();\n                }\n                else subject.next('Tempo esgotado');\n              else subject.next('Comprado');\n            else subject.next('Entrou na fila');\n          else subject.next('Sem saldo');\n        else subject.next(false);\n      })\n      .catch(error => console.log('error in UserService canBuy()', error));\n\n    return subject;\n  }\n\n  /**\n   * Tira uma unidade do saldo do usuário\n   * @returns Promise\n   */\n  debitSaldo(): firebase.Promise<any> {\n    return firebase.database().ref(`/users/${this._auth.uid}/saldo`)\n      .transaction(saldo => { return saldo - 1; });\n  }\n\n  /**\n   * Adiciona uma unidade no saldo do usuário\n   */\n  incrementSaldo(): firebase.Promise<any> {\n    return firebase.database().ref(`/users/${this._auth.uid}/saldo`)\n      .transaction(saldo => saldo + 1);\n  }\n\n  /**\n   * Verifica se o usuário já comprou a refeição\n   * @argument {string} uid id do usuário\n   * @argument {any} refeicao Refeição a ser analisada\n   * @returns {true} Se já comprou.\n   */\n  bought(refeicao: any): firebase.Promise<any> {\n    return new firebase.Promise((resolve, reject) => {\n      firebase.database().ref(`users/${this._auth.uid}/refeicoes/${refeicao.$key}`)\n        .once('value', snapshot => {\n          resolve(snapshot.val() !== null);\n        })\n    });\n  }\n\n  /**\n   * Promise que adiciona o id da refeição no documento do usuário.\n   */\n  addRefeicao(refeicao: any): firebase.Promise<any> {\n    return firebase.database().ref(`users/${this._auth.uid}/refeicoes`)\n      .child(refeicao.$key).set(true); //nao esta na lista\n  }\n\n  /**\n   * Verifica se o usuário já esta na fila de espera da refeição.\n   */\n  isQueued(refeicao: any): firebase.Promise<any> {\n    return new firebase.Promise((resolve, reject) => {\n      firebase.database().ref(`users/${this._auth.uid}/queue/${refeicao.$key}`)\n        .once('value', snapshot => {\n          resolve(snapshot.val() !== null);\n        })\n    });\n  }\n\n  /**\n   * Adiciona a refeição na fila do usuário.\n   * @param refeicao A refeição a ser adicionada.\n   */\n  addToQueue(refeicao: any, pos: Number): firebase.Promise<any> {\n    return Promise.all([\n      firebase.database().ref(`users/${this._auth.uid}/queue`).child(refeicao.$key).set(pos),\n      this.debitSaldo()]);\n  }\n\n  /**\n   * Remove a refeição no caminho do usuário.\n   * @param refeicao A refeição a ser removida.\n   */\n  removeRefeicao(refeicao: any): firebase.Promise<any> {\n    return firebase.database().ref(`users/${this._auth.uid}/refeicoes/${refeicao.$key}`).remove();\n  }\n\n  /**\n   * Remove a refeição no caminho da fila do usuário.\n   * @param refeicao A refeição a ser removida.\n   */\n  removeQueue(refeicao: any): firebase.Promise<any> {\n    return firebase.database().ref(`users/${this._auth.uid}/queue/${refeicao.$key}`).remove();\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/providers/user-service.ts","import { Component, ViewChild } from '@angular/core';\nimport { Nav, Platform, Events } from 'ionic-angular';\nimport { StatusBar } from '@ionic-native/status-bar';\nimport { SplashScreen } from '@ionic-native/splash-screen';\n\n//pages going into sidemenu.\nimport { AjudaPage } from '../pages/ajuda/ajuda';\nimport { HomePage } from '../pages/home/home';\nimport { RefeicaoListPage } from '../pages/refeicao-list/refeicao-list';\nimport { LoginPage } from '../pages/login/login';\nimport { ProfilePage } from '../pages/profile/profile';\n\nimport { FirebaseObjectObservable } from 'angularfire2/database';\nimport { UserService } from '../providers/user-service';\nimport { AuthService } from '../providers/auth-service';\n\ndeclare let FCMPlugin;\n@Component({\n  templateUrl: 'app.html'\n})\nexport class MyApp {\n  @ViewChild(Nav) nav: Nav;\n\n  rootPage: any = LoginPage; //Change this for setting the rootPage.\n\n  pages: Array<{ title: string, component: any, icon: string }>;\n\n  //information in sidemenu header\n  user: FirebaseObjectObservable<any>;\n  name: string;\n  saldo: Number;\n  profilePicture: any; //gravatar profile pic\n\n\n  constructor(public platform: Platform, public statusBar: StatusBar,\n    public splashScreen: SplashScreen, public _user: UserService,\n    public events: Events, private _auth: AuthService) {\n    this.initializeApp();\n\n    //Escutar pelo evento 'login' criado na LoginPage.\n    this.events.subscribe('login', (() => { this.onLoginSuccess() })); //Se achou, executar onLoginSuccess()\n\n    this.pages = [\n      { title: 'Home', component: HomePage, icon: 'home' },\n      { title: 'Refeições', component: RefeicaoListPage, icon: 'restaurant' },\n      { title: 'Ajuda', component: AjudaPage, icon: 'help' },\n    ];\n\n  }\n\n  initializeApp() {\n    this.platform.ready().then(() => {\n      // Okay, so the platform is ready and our plugins are available.\n      // Here you can do any higher level native things you might need.\n      this.statusBar.styleDefault();\n      this.splashScreen.hide();\n\n      this.pushSetup();\n    });\n  }\n\n  pushSetup(): void {\n    if (typeof FCMPlugin != 'undefined') {\n      FCMPlugin.getToken(\n        (pushRegistrationId: any) => {\n          console.log('Push registration ID: ', pushRegistrationId);\n        },\n        (err: any) => {\n          console.log('error retrieving push registration id: ' + err);\n        }\n      );\n\n      FCMPlugin.subscribeToTopic('topicExample');\n\n      FCMPlugin.onNotification(function (data) {\n        if (data.wasTapped) {\n          //Notification was received on device tray and tapped by the user.\n          alert(JSON.stringify(data));\n          console.log('onNotification wasTapped', data);\n        } else {\n          //Notification was received in foreground. Maybe the user needs to be notified.\n          alert(JSON.stringify(data));\n          console.log('onNotification', data);\n        }\n      });\n    }\n  }\n\n  openPage(page) {\n    // Reset the content nav to have just this page\n    // we wouldn't want the back button to show in this scenario\n    this.nav.setRoot(page.component);\n  }\n\n  /**\n   * Pega a imagem do usuário no Gravatar.\n   */\n  onLoginSuccess(): void { //get logged user\n    this.user = this._user.userObservable();\n    this.profilePicture = this._user.gravatarLink();\n  }\n\n  /**\n   * Desloga o usuário.\n   */\n  signOut(): void {\n    this._auth.signOut()\n      .then(_ => this.nav.setRoot(LoginPage))\n      .catch(reason => console.log('error in AppComponent#signout()', reason));\n  }\n\n  /**\n   * Vai para a Profile Page\n   */\n  profilePage() {\n    this.nav.setRoot(ProfilePage);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/app.component.ts","var map = {\n\t\"./af\": 290,\n\t\"./af.js\": 290,\n\t\"./ar\": 291,\n\t\"./ar-dz\": 292,\n\t\"./ar-dz.js\": 292,\n\t\"./ar-kw\": 293,\n\t\"./ar-kw.js\": 293,\n\t\"./ar-ly\": 294,\n\t\"./ar-ly.js\": 294,\n\t\"./ar-ma\": 295,\n\t\"./ar-ma.js\": 295,\n\t\"./ar-sa\": 296,\n\t\"./ar-sa.js\": 296,\n\t\"./ar-tn\": 297,\n\t\"./ar-tn.js\": 297,\n\t\"./ar.js\": 291,\n\t\"./az\": 298,\n\t\"./az.js\": 298,\n\t\"./be\": 299,\n\t\"./be.js\": 299,\n\t\"./bg\": 300,\n\t\"./bg.js\": 300,\n\t\"./bn\": 301,\n\t\"./bn.js\": 301,\n\t\"./bo\": 302,\n\t\"./bo.js\": 302,\n\t\"./br\": 303,\n\t\"./br.js\": 303,\n\t\"./bs\": 304,\n\t\"./bs.js\": 304,\n\t\"./ca\": 305,\n\t\"./ca.js\": 305,\n\t\"./cs\": 306,\n\t\"./cs.js\": 306,\n\t\"./cv\": 307,\n\t\"./cv.js\": 307,\n\t\"./cy\": 308,\n\t\"./cy.js\": 308,\n\t\"./da\": 309,\n\t\"./da.js\": 309,\n\t\"./de\": 310,\n\t\"./de-at\": 311,\n\t\"./de-at.js\": 311,\n\t\"./de-ch\": 312,\n\t\"./de-ch.js\": 312,\n\t\"./de.js\": 310,\n\t\"./dv\": 313,\n\t\"./dv.js\": 313,\n\t\"./el\": 314,\n\t\"./el.js\": 314,\n\t\"./en-au\": 315,\n\t\"./en-au.js\": 315,\n\t\"./en-ca\": 316,\n\t\"./en-ca.js\": 316,\n\t\"./en-gb\": 317,\n\t\"./en-gb.js\": 317,\n\t\"./en-ie\": 318,\n\t\"./en-ie.js\": 318,\n\t\"./en-nz\": 319,\n\t\"./en-nz.js\": 319,\n\t\"./eo\": 320,\n\t\"./eo.js\": 320,\n\t\"./es\": 321,\n\t\"./es-do\": 322,\n\t\"./es-do.js\": 322,\n\t\"./es.js\": 321,\n\t\"./et\": 323,\n\t\"./et.js\": 323,\n\t\"./eu\": 324,\n\t\"./eu.js\": 324,\n\t\"./fa\": 325,\n\t\"./fa.js\": 325,\n\t\"./fi\": 326,\n\t\"./fi.js\": 326,\n\t\"./fo\": 327,\n\t\"./fo.js\": 327,\n\t\"./fr\": 328,\n\t\"./fr-ca\": 329,\n\t\"./fr-ca.js\": 329,\n\t\"./fr-ch\": 330,\n\t\"./fr-ch.js\": 330,\n\t\"./fr.js\": 328,\n\t\"./fy\": 331,\n\t\"./fy.js\": 331,\n\t\"./gd\": 332,\n\t\"./gd.js\": 332,\n\t\"./gl\": 333,\n\t\"./gl.js\": 333,\n\t\"./gom-latn\": 334,\n\t\"./gom-latn.js\": 334,\n\t\"./he\": 335,\n\t\"./he.js\": 335,\n\t\"./hi\": 336,\n\t\"./hi.js\": 336,\n\t\"./hr\": 337,\n\t\"./hr.js\": 337,\n\t\"./hu\": 338,\n\t\"./hu.js\": 338,\n\t\"./hy-am\": 339,\n\t\"./hy-am.js\": 339,\n\t\"./id\": 340,\n\t\"./id.js\": 340,\n\t\"./is\": 341,\n\t\"./is.js\": 341,\n\t\"./it\": 342,\n\t\"./it.js\": 342,\n\t\"./ja\": 343,\n\t\"./ja.js\": 343,\n\t\"./jv\": 344,\n\t\"./jv.js\": 344,\n\t\"./ka\": 345,\n\t\"./ka.js\": 345,\n\t\"./kk\": 346,\n\t\"./kk.js\": 346,\n\t\"./km\": 347,\n\t\"./km.js\": 347,\n\t\"./kn\": 348,\n\t\"./kn.js\": 348,\n\t\"./ko\": 349,\n\t\"./ko.js\": 349,\n\t\"./ky\": 350,\n\t\"./ky.js\": 350,\n\t\"./lb\": 351,\n\t\"./lb.js\": 351,\n\t\"./lo\": 352,\n\t\"./lo.js\": 352,\n\t\"./lt\": 353,\n\t\"./lt.js\": 353,\n\t\"./lv\": 354,\n\t\"./lv.js\": 354,\n\t\"./me\": 355,\n\t\"./me.js\": 355,\n\t\"./mi\": 356,\n\t\"./mi.js\": 356,\n\t\"./mk\": 357,\n\t\"./mk.js\": 357,\n\t\"./ml\": 358,\n\t\"./ml.js\": 358,\n\t\"./mr\": 359,\n\t\"./mr.js\": 359,\n\t\"./ms\": 360,\n\t\"./ms-my\": 361,\n\t\"./ms-my.js\": 361,\n\t\"./ms.js\": 360,\n\t\"./my\": 362,\n\t\"./my.js\": 362,\n\t\"./nb\": 363,\n\t\"./nb.js\": 363,\n\t\"./ne\": 364,\n\t\"./ne.js\": 364,\n\t\"./nl\": 365,\n\t\"./nl-be\": 366,\n\t\"./nl-be.js\": 366,\n\t\"./nl.js\": 365,\n\t\"./nn\": 367,\n\t\"./nn.js\": 367,\n\t\"./pa-in\": 368,\n\t\"./pa-in.js\": 368,\n\t\"./pl\": 369,\n\t\"./pl.js\": 369,\n\t\"./pt\": 370,\n\t\"./pt-br\": 56,\n\t\"./pt-br.js\": 56,\n\t\"./pt.js\": 370,\n\t\"./ro\": 371,\n\t\"./ro.js\": 371,\n\t\"./ru\": 372,\n\t\"./ru.js\": 372,\n\t\"./sd\": 373,\n\t\"./sd.js\": 373,\n\t\"./se\": 374,\n\t\"./se.js\": 374,\n\t\"./si\": 375,\n\t\"./si.js\": 375,\n\t\"./sk\": 376,\n\t\"./sk.js\": 376,\n\t\"./sl\": 377,\n\t\"./sl.js\": 377,\n\t\"./sq\": 378,\n\t\"./sq.js\": 378,\n\t\"./sr\": 379,\n\t\"./sr-cyrl\": 380,\n\t\"./sr-cyrl.js\": 380,\n\t\"./sr.js\": 379,\n\t\"./ss\": 381,\n\t\"./ss.js\": 381,\n\t\"./sv\": 382,\n\t\"./sv.js\": 382,\n\t\"./sw\": 383,\n\t\"./sw.js\": 383,\n\t\"./ta\": 384,\n\t\"./ta.js\": 384,\n\t\"./te\": 385,\n\t\"./te.js\": 385,\n\t\"./tet\": 386,\n\t\"./tet.js\": 386,\n\t\"./th\": 387,\n\t\"./th.js\": 387,\n\t\"./tl-ph\": 388,\n\t\"./tl-ph.js\": 388,\n\t\"./tlh\": 389,\n\t\"./tlh.js\": 389,\n\t\"./tr\": 390,\n\t\"./tr.js\": 390,\n\t\"./tzl\": 391,\n\t\"./tzl.js\": 391,\n\t\"./tzm\": 392,\n\t\"./tzm-latn\": 393,\n\t\"./tzm-latn.js\": 393,\n\t\"./tzm.js\": 392,\n\t\"./uk\": 394,\n\t\"./uk.js\": 394,\n\t\"./ur\": 395,\n\t\"./ur.js\": 395,\n\t\"./uz\": 396,\n\t\"./uz-latn\": 397,\n\t\"./uz-latn.js\": 397,\n\t\"./uz.js\": 396,\n\t\"./vi\": 398,\n\t\"./vi.js\": 398,\n\t\"./x-pseudo\": 399,\n\t\"./x-pseudo.js\": 399,\n\t\"./yo\": 400,\n\t\"./yo.js\": 400,\n\t\"./zh-cn\": 401,\n\t\"./zh-cn.js\": 401,\n\t\"./zh-hk\": 402,\n\t\"./zh-hk.js\": 402,\n\t\"./zh-tw\": 403,\n\t\"./zh-tw.js\": 403\n};\nfunction webpackContext(req) {\n\treturn __webpack_require__(webpackContextResolve(req));\n};\nfunction webpackContextResolve(req) {\n\tvar id = map[req];\n\tif(!(id + 1)) // check for number or string\n\t\tthrow new Error(\"Cannot find module '\" + req + \"'.\");\n\treturn id;\n};\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 527;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/moment/locale ^\\.\\/.*$\n// module id = 527\n// module chunks = 0","import { Component } from '@angular/core';\nimport { NavController, LoadingController, Loading, AlertController } from 'ionic-angular';\n\nimport { AngularFireDatabase, FirebaseObjectObservable } from 'angularfire2/database';\n\n//moment.js library for handling timestamps\nimport * as moment from 'moment';\nimport 'moment/locale/pt-br';\n\nimport { TimeService } from '../../providers/time-service';\nimport { RefeicaoService } from '../../providers/refeicao-service';\nimport { AuthService } from '../../providers/auth-service';\nimport { UserService } from '../../providers/user-service';\n\nimport { Observable, Subject, Subscription } from \"rxjs/Rx\";\n\n@Component({\n  selector: 'page-home',\n  templateUrl: 'home.html'\n})\nexport class HomePage {\n\n  loading: Loading; //loading component.\n  shownGroup = null; //Variável para a accordion list.\n\n  user: FirebaseObjectObservable<any>;\n  userSub: Subscription;\n  isVeg: boolean;\n  refeicoes: Observable<Array<{}>>;\n  queueRefeicoes: Observable<Array<{}>>;\n\n  constructor(public navCtrl: NavController, private _auth: AuthService,\n    public afDB: AngularFireDatabase, public loadingCtrl: LoadingController,\n    public alertCtrl: AlertController, public time: TimeService,\n    public _refeicao: RefeicaoService, public _user: UserService) {\n\n    //create and present the loading\n    this.loading = this.loadingCtrl.create();\n    this.loading.present();\n\n    //Observable do Usuário\n    this.user = this.afDB.object(`/users/${this._auth.uid}`);\n    this.userSub = this.user.subscribe(user => {\n      this.isVeg = user.veg;\n      if (user.refeicoes) {\n        this.refeicoes = Observable.of(user.refeicoes)\n          .map(obj => {\n            let arr = [];\n            Object.keys(obj).forEach((key) => {\n              //get an Observable containing the info for each key in user.refeicoes object.\n              arr.push(this.afDB.object(`refeicoes/${key}`));\n            })\n\n            //zip() all Observables in the array\n            let zip = Observable.zip(...arr);\n            return zip;\n          })\n          //use switchMap() to flatten the Observables\n          .switchMap(val => val)\n          //Filter and sort the data.\n          .map(data => {\n            data = data.filter(refeicao => {\n              return refeicao['timestamp'] > moment().valueOf()\n            });\n\n            data.sort((a, b) => {\n              return a['timestamp'] < b['timestamp'] ? -1 : 1;\n            })\n            return data;\n          })\n      }\n      //repetir o mesmo processo para as refeições na lista de espera\n      if (user.queue) {\n        this.queueRefeicoes = Observable.of(user.queue)\n          .map(obj => {\n            let arr = [];\n            Object.keys(obj).forEach((key) => {\n              //get an Observable containing the info for each key in user.refeicoes object.\n              arr.push(this.afDB.object(`refeicoes/${key}`));\n            })\n\n            //zip() all Observables in the array\n            let zip = Observable.zip(...arr);\n            return zip;\n          })\n          //use switchMap() to flatten the Observables\n          .switchMap(val => val)\n          //Filter and sort the data.\n          .map(data => {\n            data = data.filter(refeicao => {\n              return refeicao['timestamp'] > moment().valueOf()\n            });\n\n            data.sort((a, b) => {\n              return a['timestamp'] < b['timestamp'] ? -1 : 1;\n            })\n            return data;\n          })\n      }\n      \n      this.loading.dismiss(); //Descartar o Loading component após tudo ser carregado.\n    })\n  }\n\n  ionViewDidLeave(){\n    //this is giving a infinite loop in Loading component\n    //this.userSub.unsubscribe(); \n  }\n\n  /**\n   * Alterna o estado de um item da accordion list.\n   * @param {Number} group O index do item da lista\n  */\n  toggleGroup(group) {\n    if (this.isGroupShown(group)) {\n      this.shownGroup = null;\n    } else {\n      this.shownGroup = group;\n    }\n  }\n\n  /**\n   * Checa se o grupo recebido está ativado.\n   * @param {Number} group O index do item da lista.\n  */\n  isGroupShown(group): boolean {\n    return this.shownGroup === group;\n  };\n\n  confirmRemove(refeicao: any): void {\n    let confirm = this.alertCtrl.create({\n      title: 'Confirmar Desistência',\n      message: `Tem certeza que deseja desistir da refeição de ${moment(refeicao.timestamp).format(`L`)}? Seu saldo será reembolsado.`,\n      buttons: [\n        {\n          text: 'Cancelar',\n        },\n        {\n          text: 'Sim',\n          handler: () => {\n            this.remove(refeicao);\n          }\n        }\n      ]\n    });\n    confirm.present();\n  }\n\n  /**\n   * Remove o usuário da refeição, reembolsando-o.\n   * @param {any} refeicao A refeição selecionada.\n   */\n  remove(refeicao: any): void {\n    this._refeicao.remove(refeicao, this.isVeg)\n      .then(_ => {\n        //Adicionar transação no histórico\n        this._user.addHistory('desistência', `Desistiu da refeição do dia ${moment(refeicao.timestamp).format('L')}`);\n        let alert = this.alertCtrl.create({\n          title: 'Sucesso',\n          subTitle: 'Você removeu esta refeição. Seu saldo será reembolsado.',\n          buttons: [{\n            text: 'OK',\n            handler: () => {\n              this.navCtrl.setRoot(HomePage);\n            }\n          }]\n        });\n        alert.present();\n      })\n      .catch(reason => {\n        if (!reason) {\n          let alert = this.alertCtrl.create({\n            title: 'Erro',\n            subTitle: 'Não é possível realizar esta operação com menos de um dia de antecedência.',\n            buttons: ['OK']\n          });\n          alert.present();\n        }\n      });\n  }\n\n  confirmRemoveQueue(refeicao: any) {\n    let confirm = this.alertCtrl.create({\n      title: 'Confirmar Desistência',\n      message: `Tem certeza que deseja desistir da fila do dia ${moment(refeicao.timestamp).format(`L`)}? Seu saldo será reembolsado.`,\n      buttons: [\n        {\n          text: 'Cancelar',\n        },\n        {\n          text: 'Sim',\n          handler: () => {\n            this.removeQueue(refeicao);\n          }\n        }\n      ]\n    });\n    confirm.present();\n  }\n\n  /**\n   * Remove o usuário da fila, reembolsando-o.\n   */\n  removeQueue(refeicao: any) {\n    this._refeicao.removeQueue(refeicao)\n      .then(_ => {\n        //Adicionar transação no histórico\n        this._user.addHistory('desistência', `Desistiu da fila da refeição do dia ${moment(refeicao.timestamp).format('L')}`);\n        let alert = this.alertCtrl.create({\n          title: 'Sucesso',\n          subTitle: 'Operação realizada com sucesso. Seu saldo será reembolsado.',\n          buttons: [{\n            text: 'OK',\n            handler: () => {\n              this.navCtrl.setRoot(HomePage);\n            }\n          }]\n        });\n        alert.present();\n      })\n      .catch(reason => {\n        let alert = this.alertCtrl.create({\n          title: 'Erro',\n          subTitle: 'Não é possível realizar esta operação com menos de um dia de antecedência.',\n          buttons: ['OK']\n        });\n        alert.present();\n      });\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/home/home.ts","import { Injectable } from '@angular/core';\nimport { Http } from '@angular/http';\nimport 'rxjs/add/operator/map';\n\n//moment.js library for handling timestamps\nimport * as moment from 'moment';\nimport 'moment/locale/pt-br';\n\nimport * as Rx from 'rxjs/Rx';\n\n@Injectable()\nexport class TimeService {\n\n  constructor(public http: Http) {\n  }\n\n  /**\n   * Verifica se a operação desejada é possível de acordo com a timestamp da refeição. A regra atual é que as operações\n   * podem ser feitas até 1 dia antes da refeição.\n   * @argument {Number} timestamp timestamp da refeição\n   */\n  isAllowed(timestamp: any): boolean {\n    //TODO: Ao invés de usar moment.now(), usar o moment do servidor.\n    return moment().isBefore(moment(timestamp).subtract(1, 'days'));\n  }\n\n  /**\n   * Pega a hora do servidor do Google Cloud, no formato UTC.\n   * @returns Observable com a timestamp.\n   */\n  serverTimestamp(): Rx.Observable<any> {\n    return this.http.get(`https://us-central1-unespru.cloudfunctions.net/utc`).map(res => res.json());\n  }\n\n  /**\n   * Retorna o timestamp do dia e horário atual.\n   */\n  localTimestamp(): Number {\n    return moment().valueOf();\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/providers/time-service.ts","/* (ignored) */\n\n\n//////////////////\n// WEBPACK FOOTER\n// buffer (ignored)\n// module id = 812\n// module chunks = 0","/* (ignored) */\n\n\n//////////////////\n// WEBPACK FOOTER\n// crypto (ignored)\n// module id = 813\n// module chunks = 0","import { FormControl } from '@angular/forms';\n\nexport class RaValidator {\n  static isValid(control: FormControl): any {\n    let RA_REGEXP = /^\\d+$/;  //Valida somente números. Para uma aplicação melhor, deve-se validar o RA no sistema da UNESP.\n\n    return RA_REGEXP.test(control.value) ? null : { invalidRA: true};\n\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/validators/ra.ts","import { FormGroup } from '@angular/forms';\n/**\n* Verifica se a senha e confirmação de senha digitadas estão iguais.\n*/\nexport function matchingPasswords(passwordKey: string, confirmPasswordKey: string) {\n  return (group: FormGroup): {[key: string]: any} => {\n    let password = group.controls[passwordKey];\n    let confirmPassword = group.controls[confirmPasswordKey];\n    \n    if (password.value !== confirmPassword.value) {\n      return {\n        mismatchedPasswords: true\n      };\n    }\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/validators/matching-passwords.ts","//AF2 Settings\nexport const FirebaseConfig = {\n    apiKey: \"AIzaSyCAOP1ZvJnnOBjzZADuB8A5UmKZf_AhfoM\",\n    authDomain: \"unespru.firebaseapp.com\",\n    databaseURL: \"https://unespru.firebaseio.com\",\n    projectId: \"unespru\",\n    storageBucket: \"unespru.appspot.com\",\n    messagingSenderId: \"103998911185\"\n};\n\n\n// WEBPACK FOOTER //\n// ./src/firebase-config.ts","import { Injectable, Pipe } from '@angular/core';\nimport * as moment from 'moment';\n\n// Pipe que utiliza a função format() do momentjs para timestamps.\n@Pipe({\n  name: 'format'\n})\n@Injectable()\nexport class FormatPipe {\n  transform(value: Date|moment.Moment, ...args: any[]): any {\n        let [format] = args;\n        return moment(value).format(format);\n    }\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/pipes/format-pipe.ts","import { Injectable, Pipe } from '@angular/core';\nimport * as moment from 'moment';\n\n// Pipe que utiliza a função fromNow() do momentjs para timestamps.\n\n@Pipe({\n  name: 'fromNow'\n})\n\n@Injectable()\nexport class FromNowPipe {\n  transform(value: Date|moment.Moment): any {\n        return moment(value).fromNow();\n    }\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/pipes/from-now-pipe.ts","import {Pipe, PipeTransform} from '@angular/core';\n\n@Pipe({name: 'titleCase'})\nexport class TitleCasePipe implements PipeTransform {\n\n    public transform(input:string): string{\n        if (!input) {\n            return '';\n        } else {\n            return input.replace(/\\w\\S*/g, (txt => txt[0].toUpperCase() + txt.substr(1).toLowerCase() ));\n        }\n    }\n    \n}\n\n\n// WEBPACK FOOTER //\n// ./src/pipes/title-case-pipe.ts","import { Injectable, Pipe } from '@angular/core';\nimport { AuthService } from '../providers/auth-service';\n\n//Pipe que recebe o objeto da fila de uma refeição e retorna a posição do usuário logado.\n@Pipe({\n  name: 'userPos'\n})\n@Injectable()\nexport class UserPosPipe {\n\n  constructor(private _auth: AuthService){}\n\n  transform(value: any, ...args: any[]): any {\n        //value.hasOwnProperty(this._auth.uid);\n        return value.queue[this._auth.uid] - value.queue_released;\n    }\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/pipes/user-pos-pipe.ts","import {Pipe, PipeTransform} from '@angular/core';\n\n\n@Pipe({name: 'keys'})\nexport class KeysPipe implements PipeTransform {\n  transform(value: any, args:string[]) : any {\n    let keys = [];\n    for (let key in value) {\n      keys.push({key: key, value: value[key]});\n    }\n    return keys;\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/pipes/keys-pipe.ts","/*\nCode written by Josh Morony. All rights reserved.\n*/\nimport { Directive, ElementRef, Renderer } from '@angular/core';\n\n@Directive({\n  selector: '[parallax-header]',\n  host: {\n    '(ionScroll)': 'onContentScroll($event)',\n    '(window:resize)': 'onWindowResize($event)'\n  }\n})\nexport class ParallaxHeader {\n\n  header: any;\n  headerHeight: any;\n  translateAmt: any;\n  scaleAmt: any;\n\n  constructor(public element: ElementRef, public renderer: Renderer) {\n  }\n\n  ngOnInit() {\n    let content = this.element.nativeElement.getElementsByClassName('scroll-content')[0];\n    this.header = content.getElementsByClassName('header-image')[0];\n    let mainContent = content.getElementsByClassName('main-content')[0];\n\n    this.headerHeight = this.header.clientHeight;\n\n    this.renderer.setElementStyle(this.header, 'webkitTransformOrigin', 'center bottom');\n    this.renderer.setElementStyle(this.header, 'background-size', 'cover');\n    this.renderer.setElementStyle(mainContent, 'position', 'absolute');\n  }\n\n  onWindowResize(ev) {\n    this.headerHeight = this.header.clientHeight;\n  }\n\n  onContentScroll(ev) {\n    ev.domWrite(() => {\n      this.updateParallaxHeader(ev);\n    });\n  }\n\n  /**\n   * Função que é chamada sempre que um evento de scroll é ativado, criando o efeito paralaxe.\n   */\n  updateParallaxHeader(ev) {\n    if (ev.scrollTop >= 0) {\n      this.translateAmt = ev.scrollTop / 2;\n      this.scaleAmt = 1;\n    } else {\n      this.translateAmt = 0;\n      this.scaleAmt = -ev.scrollTop / this.headerHeight + 1;\n    }\n    this.renderer.setElementStyle(this.header, 'webkitTransform', 'translate3d(0,' + this.translateAmt + 'px,0) scale(' + this.scaleAmt + ',' + this.scaleAmt + ')');\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/components/parallax-header/parallax-header.ts"],"sourceRoot":""}